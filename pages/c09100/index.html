<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>http-cache | JAVA-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/java-tutorial/img/favicon.ico">
    <meta name="description" content="☕ java-tutorial 是一个 Java 教程，汇集一个老司机在 Java 领域的十年积累。">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/java-tutorial/assets/css/0.styles.0eacbd67.css" as="style"><link rel="preload" href="/java-tutorial/assets/js/app.c75893ed.js" as="script"><link rel="preload" href="/java-tutorial/assets/js/2.d027cc87.js" as="script"><link rel="preload" href="/java-tutorial/assets/js/79.2164e334.js" as="script"><link rel="prefetch" href="/java-tutorial/assets/js/10.48d24831.js"><link rel="prefetch" href="/java-tutorial/assets/js/11.30e83843.js"><link rel="prefetch" href="/java-tutorial/assets/js/12.cc29e0b4.js"><link rel="prefetch" href="/java-tutorial/assets/js/13.ad4d4ca9.js"><link rel="prefetch" href="/java-tutorial/assets/js/14.478d1fb5.js"><link rel="prefetch" href="/java-tutorial/assets/js/15.b8b07546.js"><link rel="prefetch" href="/java-tutorial/assets/js/16.ff44a156.js"><link rel="prefetch" href="/java-tutorial/assets/js/17.7549d22b.js"><link rel="prefetch" href="/java-tutorial/assets/js/18.bf7dfb31.js"><link rel="prefetch" href="/java-tutorial/assets/js/19.8bff6c19.js"><link rel="prefetch" href="/java-tutorial/assets/js/20.a85df375.js"><link rel="prefetch" href="/java-tutorial/assets/js/21.3e1f56ca.js"><link rel="prefetch" href="/java-tutorial/assets/js/22.1dc7a7de.js"><link rel="prefetch" href="/java-tutorial/assets/js/23.3bc39c11.js"><link rel="prefetch" href="/java-tutorial/assets/js/24.2abf3b5b.js"><link rel="prefetch" href="/java-tutorial/assets/js/25.a7918cbd.js"><link rel="prefetch" href="/java-tutorial/assets/js/26.95ef1061.js"><link rel="prefetch" href="/java-tutorial/assets/js/27.4ac49659.js"><link rel="prefetch" href="/java-tutorial/assets/js/28.574d04f2.js"><link rel="prefetch" href="/java-tutorial/assets/js/29.722754a3.js"><link rel="prefetch" href="/java-tutorial/assets/js/3.2238ba49.js"><link rel="prefetch" href="/java-tutorial/assets/js/30.6d491d04.js"><link rel="prefetch" href="/java-tutorial/assets/js/31.52a4468c.js"><link rel="prefetch" href="/java-tutorial/assets/js/32.98b3ec78.js"><link rel="prefetch" href="/java-tutorial/assets/js/33.0579c0e4.js"><link rel="prefetch" href="/java-tutorial/assets/js/34.26484bd6.js"><link rel="prefetch" href="/java-tutorial/assets/js/35.c40622b5.js"><link rel="prefetch" href="/java-tutorial/assets/js/36.380f2799.js"><link rel="prefetch" href="/java-tutorial/assets/js/37.2813f2c2.js"><link rel="prefetch" href="/java-tutorial/assets/js/38.629d4e69.js"><link rel="prefetch" href="/java-tutorial/assets/js/39.0ca435c9.js"><link rel="prefetch" href="/java-tutorial/assets/js/4.6a2a0237.js"><link rel="prefetch" href="/java-tutorial/assets/js/40.2d4ee357.js"><link rel="prefetch" href="/java-tutorial/assets/js/41.d8ba541d.js"><link rel="prefetch" href="/java-tutorial/assets/js/42.43501b6c.js"><link rel="prefetch" href="/java-tutorial/assets/js/43.6c6c731b.js"><link rel="prefetch" href="/java-tutorial/assets/js/44.ef11ce22.js"><link rel="prefetch" href="/java-tutorial/assets/js/45.dd69fd1d.js"><link rel="prefetch" href="/java-tutorial/assets/js/46.77960e81.js"><link rel="prefetch" href="/java-tutorial/assets/js/47.fba86ad9.js"><link rel="prefetch" href="/java-tutorial/assets/js/48.c1d9dc36.js"><link rel="prefetch" href="/java-tutorial/assets/js/49.3ffaf133.js"><link rel="prefetch" href="/java-tutorial/assets/js/5.01073185.js"><link rel="prefetch" href="/java-tutorial/assets/js/50.b60caaf5.js"><link rel="prefetch" href="/java-tutorial/assets/js/51.9b4973a4.js"><link rel="prefetch" href="/java-tutorial/assets/js/52.8a54c0d0.js"><link rel="prefetch" href="/java-tutorial/assets/js/53.8fa42bf2.js"><link rel="prefetch" href="/java-tutorial/assets/js/54.33bf7dff.js"><link rel="prefetch" href="/java-tutorial/assets/js/55.2b3863ad.js"><link rel="prefetch" href="/java-tutorial/assets/js/56.fe77df1c.js"><link rel="prefetch" href="/java-tutorial/assets/js/57.6f563d05.js"><link rel="prefetch" href="/java-tutorial/assets/js/58.e9069574.js"><link rel="prefetch" href="/java-tutorial/assets/js/59.08b2b976.js"><link rel="prefetch" href="/java-tutorial/assets/js/6.dd7c3225.js"><link rel="prefetch" href="/java-tutorial/assets/js/60.e1b14565.js"><link rel="prefetch" href="/java-tutorial/assets/js/61.ee322ca9.js"><link rel="prefetch" href="/java-tutorial/assets/js/62.912fd302.js"><link rel="prefetch" href="/java-tutorial/assets/js/63.97439b7b.js"><link rel="prefetch" href="/java-tutorial/assets/js/64.8540cdff.js"><link rel="prefetch" href="/java-tutorial/assets/js/65.af47db9e.js"><link rel="prefetch" href="/java-tutorial/assets/js/66.812dee0e.js"><link rel="prefetch" href="/java-tutorial/assets/js/67.7cc3fbf6.js"><link rel="prefetch" href="/java-tutorial/assets/js/68.27a4067f.js"><link rel="prefetch" href="/java-tutorial/assets/js/69.ba1038ea.js"><link rel="prefetch" href="/java-tutorial/assets/js/7.95c13777.js"><link rel="prefetch" href="/java-tutorial/assets/js/70.490a676a.js"><link rel="prefetch" href="/java-tutorial/assets/js/71.1007a124.js"><link rel="prefetch" href="/java-tutorial/assets/js/72.e3d8ba3a.js"><link rel="prefetch" href="/java-tutorial/assets/js/73.25260b67.js"><link rel="prefetch" href="/java-tutorial/assets/js/74.d94da19b.js"><link rel="prefetch" href="/java-tutorial/assets/js/75.64a47aab.js"><link rel="prefetch" href="/java-tutorial/assets/js/76.da4aba0b.js"><link rel="prefetch" href="/java-tutorial/assets/js/77.45b2d0c1.js"><link rel="prefetch" href="/java-tutorial/assets/js/78.eaf4e5d8.js"><link rel="prefetch" href="/java-tutorial/assets/js/8.255cdf50.js"><link rel="prefetch" href="/java-tutorial/assets/js/80.87eaa80e.js"><link rel="prefetch" href="/java-tutorial/assets/js/81.f066daf8.js"><link rel="prefetch" href="/java-tutorial/assets/js/82.f0d0a94f.js"><link rel="prefetch" href="/java-tutorial/assets/js/83.63d7e890.js"><link rel="prefetch" href="/java-tutorial/assets/js/84.0bc3ae7a.js"><link rel="prefetch" href="/java-tutorial/assets/js/85.a56040c4.js"><link rel="prefetch" href="/java-tutorial/assets/js/86.410ce3ae.js"><link rel="prefetch" href="/java-tutorial/assets/js/9.5044127e.js">
    <link rel="stylesheet" href="/java-tutorial/assets/css/0.styles.0eacbd67.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/java-tutorial/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo.png" alt="JAVA-TUTORIAL" class="logo"> <span class="site-name can-hide">JAVA-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaEE" class="dropdown-title"><!----> <span class="title" style="display:;">JavaEE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/01.JavaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/02.服务器/" class="nav-link">服务器</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java软件" class="dropdown-title"><a href="/java-tutorial/11.软件/" class="link-title">Java软件</a> <span class="title" style="display:none;">Java软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/11.软件/01.构建/" class="nav-link">Java构建</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.软件/02.IDE/" class="nav-link">Java IDE</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.软件/03.监控诊断/" class="nav-link">Java监控诊断</a></li></ul></div></div><div class="nav-item"><a href="/java-tutorial/12.工具/" class="nav-link">Java工具</a></div><div class="nav-item"><a href="/java-tutorial/13.框架/" class="nav-link">Java框架</a></div><div class="nav-item"><a href="/java-tutorial/14.中间件/" class="nav-link">Java中间件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">✨ Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 教程 📚
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore 教程 📚
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/dunwu/java-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaEE" class="dropdown-title"><!----> <span class="title" style="display:;">JavaEE</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/01.JavaWeb/" class="nav-link">JavaWeb</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/02.JavaEE/02.服务器/" class="nav-link">服务器</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java软件" class="dropdown-title"><a href="/java-tutorial/11.软件/" class="link-title">Java软件</a> <span class="title" style="display:none;">Java软件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-tutorial/11.软件/01.构建/" class="nav-link">Java构建</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.软件/02.IDE/" class="nav-link">Java IDE</a></li><li class="dropdown-item"><!----> <a href="/java-tutorial/11.软件/03.监控诊断/" class="nav-link">Java监控诊断</a></li></ul></div></div><div class="nav-item"><a href="/java-tutorial/12.工具/" class="nav-link">Java工具</a></div><div class="nav-item"><a href="/java-tutorial/13.框架/" class="nav-link">Java框架</a></div><div class="nav-item"><a href="/java-tutorial/14.中间件/" class="nav-link">Java中间件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">✨ Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 教程 📚
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/javacore/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore 教程 📚
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/dunwu/java-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MQ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/5a6cf3/" class="sidebar-link">消息队列面试</a></li><li><a href="/java-tutorial/pages/055069/" class="sidebar-link">消息队列基本原理</a></li><li><a href="/java-tutorial/pages/f56a96/" class="sidebar-link">RocketMQ 快速入门</a></li><li><a href="/java-tutorial/pages/3f7c49/" class="sidebar-link">ActiveMQ 快速入门</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>缓存</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/eb30d6/" class="sidebar-link">缓存夺命连环问</a></li><li><a href="/java-tutorial/pages/970fa6/" class="sidebar-link">Java 缓存中间件</a></li><li><a href="/java-tutorial/pages/25a710/" class="sidebar-link">Memcached 快速入门</a></li><li><a href="/java-tutorial/pages/c4647d/" class="sidebar-link">Ehcache 快速入门</a></li><li><a href="/java-tutorial/pages/9632fd/" class="sidebar-link">Java 进程内缓存</a></li><li><a href="/java-tutorial/pages/c09100/" aria-current="page" class="active sidebar-link">http-cache</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c09100/#http-强缓存" class="sidebar-link">Http 强缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c09100/#expires" class="sidebar-link">Expires</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c09100/#cache-control" class="sidebar-link">Cache-Control</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c09100/#pragma" class="sidebar-link">Pragma</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c09100/#协商缓存" class="sidebar-link">协商缓存</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c09100/#etag-if-none-match" class="sidebar-link">ETag/If-None-Match</a></li><li class="sidebar-sub-header level3"><a href="/java-tutorial/pages/c09100/#last-modified-if-modified-since" class="sidebar-link">Last-Modified/If-Modified-Since</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/java-tutorial/pages/c09100/#参考资料" class="sidebar-link">参考资料</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>流量控制</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java-tutorial/pages/f2ebed/" class="sidebar-link">Hystrix 快速入门</a></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/java-tutorial/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/java-tutorial/categories/?category=%E4%B8%AD%E9%97%B4%E4%BB%B6" title="分类" data-v-06225672>中间件</a></li><li data-v-06225672><a href="/java-tutorial/categories/?category=%E7%BC%93%E5%AD%98" title="分类" data-v-06225672>缓存</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/dunwu" target="_blank" title="作者" class="beLink" data-v-06225672>dunwu</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-02-17</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">http-cache<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="http-缓存"><a href="#http-缓存" class="header-anchor">#</a> Http 缓存</h1> <p>HTTP 缓存分为 2 种，一种是强缓存，另一种是协商缓存。主要作用是可以加快资源获取速度，提升用户体验，减少网络传输，缓解服务端的压力。</p> <h2 id="http-强缓存"><a href="#http-强缓存" class="header-anchor">#</a> Http 强缓存</h2> <p>不需要发送请求到服务端，直接读取浏览器本地缓存，在 Chrome 的 Network 中显示的 HTTP 状态码是 200 ，在 Chrome 中，强缓存又分为 Disk Cache (存放在硬盘中)和 Memory Cache (存放在内存中)，存放的位置是由浏览器控制的。是否强缓存由 <code>Expires</code>、<code>Cache-Control</code> 和 <code>Pragma</code> 3 个 Header 属性共同来控制。</p> <h3 id="expires"><a href="#expires" class="header-anchor">#</a> Expires</h3> <p><code>Expires</code> 的值是一个 HTTP 日期，在浏览器发起请求时，会根据系统时间和 Expires 的值进行比较，如果系统时间超过了 Expires 的值，缓存失效。由于和系统时间进行比较，所以当系统时间和服务器时间不一致的时候，会有缓存有效期不准的问题。Expires 的优先级在三个 Header 属性中是最低的。</p> <h3 id="cache-control"><a href="#cache-control" class="header-anchor">#</a> Cache-Control</h3> <p><code>Cache-Control</code> 是 HTTP/1.1 中新增的属性，在请求头和响应头中都可以使用，常用的属性值如有：</p> <ul><li><code>max-age</code>：单位是秒，缓存时间计算的方式是距离发起的时间的秒数，超过间隔的秒数缓存失效</li> <li><code>no-cache</code>：不使用强缓存，需要与服务器验证缓存是否新鲜</li> <li><code>no-store</code>：禁止使用缓存（包括协商缓存），每次都向服务器请求最新的资源</li> <li><code>private</code>：专用于个人的缓存，中间代理、CDN 等不能缓存此响应</li> <li><code>public</code>：响应可以被中间代理、CDN 等缓存</li> <li><code>must-revalidate</code>：在缓存过期前可以使用，过期后必须向服务器验证</li></ul> <h3 id="pragma"><a href="#pragma" class="header-anchor">#</a> Pragma</h3> <p><code>Pragma</code> 只有一个属性值，就是 no-cache ，效果和 Cache-Control 中的 no-cache 一致，不使用强缓存，需要与服务器验证缓存是否新鲜，在 3 个头部属性中的优先级最高。</p> <h2 id="协商缓存"><a href="#协商缓存" class="header-anchor">#</a> 协商缓存</h2> <p>当浏览器的强缓存失效的时候或者请求头中设置了不走强缓存，并且在请求头中设置了 If-Modified-Since 或者 If-None-Match 的时候，会将这两个属性值到服务端去验证是否命中协商缓存，如果命中了协商缓存，会返回 304 状态，加载浏览器缓存，并且响应头会设置 Last-Modified 或者 ETag 属性。</p> <h3 id="etag-if-none-match"><a href="#etag-if-none-match" class="header-anchor">#</a> ETag/If-None-Match</h3> <p>Etag： 服务器响应请求时，通过此字段告诉浏览器当前资源在服务器生成的唯一标识（生成规则由服务器决定）</p> <p>If-None-Match： 再次请求服务器时，浏览器的请求报文头部会包含此字段，后面的值为在缓存中获取的标识。服务器接收到次报文后发现 If-None-Match 则与被请求资源的唯一标识进行对比。</p> <ol><li>不同，说明资源被改动过，则响应整个资源内容，返回状态码 200。</li> <li>相同，说明资源无心修改，则响应 header，浏览器直接从缓存中获取数据信息。返回状态码 304.</li></ol> <p>但是实际应用中由于 Etag 的计算是使用算法来得出的，而算法会占用服务端计算的资源，所有服务端的资源都是宝贵的，所以就很少使用 Etag 了。</p> <h3 id="last-modified-if-modified-since"><a href="#last-modified-if-modified-since" class="header-anchor">#</a> Last-Modified/If-Modified-Since</h3> <p>Last-Modified： 服务器在响应请求时，会告诉浏览器资源的最后修改时间。</p> <p>if-Modified-Since: 浏览器再次请求服务器的时候，请求头会包含此字段，后面跟着在缓存中获得的最后修改时间。服务端收到此请求头发现有 if-Modified-Since，则与被请求资源的最后修改时间进行对比，如果一致则返回 304 和响应报文头，浏览器只需要从缓存中获取信息即可。 从字面上看，就是说：从某个时间节点算起，是否文件被修改了</p> <ol><li>如果真的被修改：那么开始传输响应一个整体，服务器返回：200 OK</li> <li>如果没有被修改：那么只需传输响应 header，服务器返回：304 Not Modified</li></ol> <p>if-Unmodified-Since: 从字面上看, 就是说: 从某个时间点算起, 是否文件没有被修改</p> <ol><li>如果没有被修改:则开始`继续'传送文件: 服务器返回: 200 OK</li> <li>如果文件被修改:则不传输,服务器返回: 412 Precondition failed (预处理错误)</li></ol> <p>这两个的区别是一个是修改了才下载一个是没修改才下载。 Last-Modified 说好却也不是特别好，因为如果在服务器上，一个资源被修改了，但其实际内容根本没发生改变，会因为 Last-Modified 时间匹配不上而返回了整个实体给客户端（即使客户端缓存里有个一模一样的资源）。为了解决这个问题，HTTP1.1 推出了 Etag。</p> <h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="https://juejin.im/post/5eb7f811f265da7bbc7cc5bd" target="_blank" rel="noopener noreferrer">图解 HTTP 缓存<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5a1d4e546fb9a0450f21af23" target="_blank" rel="noopener noreferrer">HTTP----HTTP 缓存机制<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.im/post/5a6c87c46fb9a01ca560b4d7" target="_blank" rel="noopener noreferrer">缓存详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <div class="page-slot page-slot-bottom">
  <div class="wwads-cn wwads-horizontal pageB" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .pageB img{width:80px!important;}
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{line-height:1;}
  </style>
  </div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/java-tutorial/edit/master/docs/14.中间件/02.缓存/06.Http缓存.md" target="_blank" rel="noopener noreferrer">📝 帮助改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/java-tutorial/tags/?tag=%E7%BC%93%E5%AD%98" title="标签">#缓存</a><a href="/java-tutorial/tags/?tag=Http" title="标签">#Http</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/07/29, 18:44:28</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/java-tutorial/pages/9632fd/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Java 进程内缓存</div></a> <a href="/java-tutorial/pages/f2ebed/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Hystrix 快速入门</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/java-tutorial/pages/9632fd/" class="prev">Java 进程内缓存</a></span> <span class="next"><a href="/java-tutorial/pages/f2ebed/">Hystrix 快速入门</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/java-tutorial/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/java-tutorial/pages/3cbcff/"><div>
            Java 中间件
            <!----></div></a> <span class="date">04-09</span></dt></dl><dl><dd>02</dd> <dt><a href="/java-tutorial/pages/86288e/"><div>
            Tomcat 教程
            <!----></div></a> <span class="date">02-18</span></dt></dl><dl><dd>03</dd> <dt><a href="/java-tutorial/pages/ca58e7/"><div>
            JavaEE
            <!----></div></a> <span class="date">02-18</span></dt></dl> <dl><dd></dd> <dt><a href="/java-tutorial/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:forbreak@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/dunwu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span>钝悟（dunwu） | CC-BY-SA-4.0</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="136" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 10px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"></div></div>
    <script src="/java-tutorial/assets/js/app.c75893ed.js" defer></script><script src="/java-tutorial/assets/js/2.d027cc87.js" defer></script><script src="/java-tutorial/assets/js/79.2164e334.js" defer></script>
  </body>
</html>
